---
title: Customize Exports with Transformers
description: Customize submission exports by transforming values in the export pipeline
sidebar_position: 7
---

# Customize Exports with Transformers

Endatix exports support a value transformation pipeline. You can register custom transformers to:

- rewrite URLs
- extract fields from complex JSON values
- normalize or clean values before they are exported

## How it works

During export, each JSON column value is extracted as a `JsonElement` and passed through all registered `IValueTransformer` implementations (in registration order).

The transformer receives a `TransformationContext<T>` with:

- the current export row (`Row`)
- the parsed answers JSON document (`JsonDoc`)
- an optional logger (`Logger`)

## The `IValueTransformer` interface

```csharp
public interface IValueTransformer
{
    object? Transform<T>(object? value, TransformationContext<T> context);
}
```

## Registering a transformer

Register transformers through DI:

```csharp
builder.Host.ConfigureEndatixWithDefaults(endatix =>
{
    endatix.Services.AddExportTransformer<MyTransformer>();
});
```

Transformers run in **registration order**. For example, if storage URL rewriting is enabled, it should run before an extractor transformer so you extract already-rewritten URLs.

## Example: extract only file URLs from file answers

File upload answers are commonly stored like this:

```json
{"name":"file.jpg","type":"image/jpeg","content":"https://storage.example.com/..."}
```

or as an array for multiple files:

```json
[{"name":"file.jpg","type":"image/jpeg","content":"https://storage.example.com/..."}]
```

If you want exports to contain only the URL(s), you can use a transformer that extracts the `content` value.

### Result (JSON export)

- Single file object becomes a string:

```json
"https://storage.example.com/..."
```

- Array becomes an array of strings:

```json
["https://storage.example.com/..."]
```

### Implementation

See the full sample in `oss/samples/Endatix.Samples.CustomTransformers` (`FileContentExtractorTransformer`).

At a high level, it:

- detects objects/arrays containing a `content` field
- returns either `string` or a JSON array of strings
- leaves unrelated values unchanged

## Sample

The sample project is located at:

- `oss/samples/Endatix.Samples.CustomTransformers`

It includes:

- `FileContentExtractorTransformer`
- a wiring snippet using `ConfigureEndatixWithDefaults(...)`